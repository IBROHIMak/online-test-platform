<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Test Platform - IELTS & IT</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Welcome Screen -->
    <div id="welcomeScreen" class="screen active">
        <div class="container">
            <div class="welcome-card">
                <div class="logo">
                    <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                        <circle cx="40" cy="40" r="38" stroke="#4F46E5" stroke-width="4"/>
                        <path d="M40 20V40L55 50" stroke="#4F46E5" stroke-width="4" stroke-linecap="round"/>
                    </svg>
                </div>
                <h1>Professional Test Platform</h1>
                <p class="subtitle">IELTS va IT bilimingizni sinab ko'ring</p>
                
                <div class="test-selection">
                    <div class="test-card" onclick="selectTest('ielts')">
                        <div class="test-icon">üìö</div>
                        <h3>IELTS Test</h3>
                        <p>Reading & Academic</p>
                        <div class="test-info">
                            <span>‚è±Ô∏è 60 daqiqa</span>
                            <span>üìù 40 savol</span>
                        </div>
                    </div>
                    
                    <div class="test-card" onclick="selectTest('it')">
                        <div class="test-icon">üíª</div>
                        <h3>IT Test</h3>
                        <p>Dasturlash va Mantiq</p>
                        <div class="test-info">
                            <span>‚è±Ô∏è 60 daqiqa</span>
                            <span>üìù 40 savol</span>
                        </div>
                    </div>
                    
                    <div class="test-card" onclick="selectTest('chemistry')">
                        <div class="test-icon">üß™</div>
                        <h3>Kimyo Test</h3>
                        <p>Umumiy va Organik Kimyo</p>
                        <div class="test-info">
                            <span>‚è±Ô∏è 50 daqiqa</span>
                            <span>üìù 30 savol</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Instructions Screen -->
    <div id="instructionsScreen" class="screen">
        <div class="container">
            <div class="instructions-card">
                <h2>Test Qoidalari</h2>
                <div class="instructions-content">
                    <div class="instruction-item">
                        <span class="instruction-icon">‚è±Ô∏è</span>
                        <div>
                            <h4>Vaqt cheklovi</h4>
                            <p>Test davomida timer ishlaydi. Vaqt tugashi bilan test avtomatik yakunlanadi.</p>
                        </div>
                    </div>
                    <div class="instruction-item">
                        <span class="instruction-icon">üìù</span>
                        <div>
                            <h4>Savollar navigatsiyasi</h4>
                            <p>Istalgan savolga o'tishingiz mumkin. Javob berilmagan savollar belgilanadi.</p>
                        </div>
                    </div>
                    <div class="instruction-item">
                        <span class="instruction-icon">‚≠ê</span>
                        <div>
                            <h4>Muhim savollar</h4>
                            <p>Savollarni "yulduzcha" bilan belgilashingiz va keyinroq qaytishingiz mumkin.</p>
                        </div>
                    </div>
                    <div class="instruction-item">
                        <span class="instruction-icon">‚úÖ</span>
                        <div>
                            <h4>Javoblarni tekshirish</h4>
                            <p>Test yakunida barcha javoblaringizni ko'rib chiqishingiz mumkin.</p>
                        </div>
                    </div>
                </div>
                
                <div class="user-info-form">
                    <input type="text" id="userName" placeholder="Ismingizni kiriting" required>
                    <input type="email" id="userEmail" placeholder="Email (ixtiyoriy)">
                </div>
                
                <div class="button-group">
                    <button class="btn btn-secondary" onclick="backToWelcome()">Orqaga</button>
                    <button class="btn btn-primary" onclick="startTest()">Testni Boshlash</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Test Screen -->
    <div id="testScreen" class="screen">
        <!-- Header -->
        <div class="test-header">
            <div class="header-left">
                <h3 id="testTitle">IELTS Test</h3>
                <span id="userNameDisplay" class="user-badge"></span>
            </div>
            <div class="header-center">
                <div class="timer" id="timer">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span id="timerDisplay">60:00</span>
                </div>
            </div>
            <div class="header-right">
                <button class="btn btn-icon" onclick="toggleFullscreen()" title="Fullscreen">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
                    </svg>
                </button>
                <button class="btn btn-warning" onclick="confirmSubmit()">Yakunlash</button>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-stats">
                <span>Javob berilgan: <strong id="answeredCount">0</strong></span>
                <span>Qolgan: <strong id="remainingCount">0</strong></span>
                <span>Belgilangan: <strong id="flaggedCount">0</strong></span>
            </div>
        </div>

        <div class="test-content">
            <!-- Question Navigation Sidebar -->
            <div class="question-nav" id="questionNav">
                <div class="nav-header">
                    <h4>Savollar</h4>
                    <button class="btn btn-icon" onclick="toggleNav()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                <div class="nav-legend">
                    <div class="legend-item">
                        <span class="legend-box answered"></span>
                        <span>Javob berilgan</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-box flagged"></span>
                        <span>Belgilangan</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-box current"></span>
                        <span>Joriy savol</span>
                    </div>
                </div>
                <div class="nav-grid" id="navGrid"></div>
            </div>

            <!-- Main Question Area -->
            <div class="question-area">
                <button class="nav-toggle" onclick="toggleNav()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12h18M3 6h18M3 18h18"/>
                    </svg>
                </button>

                <div class="question-container">
                    <div class="question-header">
                        <div class="question-number">
                            <span>Savol</span>
                            <strong id="currentQuestionNum">1</strong>
                            <span>/ <span id="totalQuestions">30</span></span>
                        </div>
                        <button class="btn btn-icon flag-btn" onclick="toggleFlag()" id="flagBtn" title="Belgilash">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/>
                                <line x1="4" y1="22" x2="4" y2="15"/>
                            </svg>
                        </button>
                    </div>

                    <div class="question-content" id="questionContent">
                        <!-- Question will be loaded here -->
                    </div>

                    <div class="question-actions">
                        <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 12H5M12 19l-7-7 7-7"/>
                            </svg>
                            Oldingi
                        </button>
                        <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn">
                            Keyingi
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="resultsScreen" class="screen">
        <div class="container">
            <div class="results-card">
                <div class="results-header">
                    <div class="success-icon">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                            <circle cx="40" cy="40" r="38" stroke="#10B981" stroke-width="4"/>
                            <path d="M25 40L35 50L55 30" stroke="#10B981" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h2>Test Yakunlandi!</h2>
                    <p class="results-subtitle">Sizning natijangiz</p>
                </div>

                <div class="score-display">
                    <div class="score-circle">
                        <svg width="200" height="200" viewBox="0 0 200 200">
                            <circle cx="100" cy="100" r="90" fill="none" stroke="#E5E7EB" stroke-width="12"/>
                            <circle id="scoreCircle" cx="100" cy="100" r="90" fill="none" stroke="#4F46E5" stroke-width="12" 
                                    stroke-dasharray="565.48" stroke-dashoffset="565.48" stroke-linecap="round"
                                    transform="rotate(-90 100 100)"/>
                        </svg>
                        <div class="score-text">
                            <span class="score-value" id="scoreValue">0</span>
                            <span class="score-total">/ <span id="scoreTotalDisplay">30</span></span>
                        </div>
                    </div>
                    <div class="score-percentage" id="scorePercentage">0%</div>
                </div>

                <div class="results-stats">
                    <div class="stat-card correct">
                        <div class="stat-icon">‚úì</div>
                        <div class="stat-value" id="correctAnswers">0</div>
                        <div class="stat-label">To'g'ri</div>
                    </div>
                    <div class="stat-card incorrect">
                        <div class="stat-icon">‚úó</div>
                        <div class="stat-value" id="incorrectAnswers">0</div>
                        <div class="stat-label">Noto'g'ri</div>
                    </div>
                    <div class="stat-card unanswered">
                        <div class="stat-icon">‚àí</div>
                        <div class="stat-value" id="unansweredCount">0</div>
                        <div class="stat-label">Javobsiz</div>
                    </div>
                    <div class="stat-card time">
                        <div class="stat-icon">‚è±</div>
                        <div class="stat-value" id="timeTaken">0:00</div>
                        <div class="stat-label">Vaqt</div>
                    </div>
                </div>

                <div class="performance-chart">
                    <h3>Natijalar tahlili</h3>
                    <canvas id="resultsChart" width="400" height="200"></canvas>
                </div>

                <div class="detailed-results">
                    <h3>Batafsil natijalar</h3>
                    <div id="detailedAnswers" class="answers-review"></div>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="reviewAnswers()">Javoblarni Ko'rish</button>
                    <button class="btn btn-primary" onclick="restartTest()">Qayta Boshlash</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <h3>Testni yakunlashni xohlaysizmi?</h3>
            <p>Javob berilmagan savollar: <strong id="unansweredModal">0</strong></p>
            <p class="warning-text">Yakunlangandan keyin qaytib javob berolmaysiz!</p>
            <div class="button-group">
                <button class="btn btn-secondary" onclick="closeModal()">Bekor qilish</button>
                <button class="btn btn-danger" onclick="submitTest()">Ha, Yakunlash</button>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>
